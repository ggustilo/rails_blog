<div class="post">
	<h5><%= @post.title %></h5>
	<p><%= @post.content %></p>
	<p><%= @post.requests_for_responses %></p>
	<p><%= @post.additional_resources %></p>

	<div class="post_responses">
		<% @post.responses.each do |response| %>
			<% if response.approved || current_user == @post.writer %>
				<div class="response">
					<h6><a href="/posts/<%=@post.id%>/responses/<%=response.id%>"><%= response.title %></a></h6>
					<p><%= response.content %></p>
					<p class="response_author"><%=response.writer.username %></p>
					<p class="response_date"><%=response.created_at %></p>
					<% if !response.approved && current_user == @post.writer %>
						<%= button_to "Approve Response", posts_responses_approve_path(@post, response), method: :post %>
					<% elsif response.approved && current_user == @post.writer %>
						<%= button_to "Unapprove Response", posts_responses_approve_path(@post, response), method: :post %>
					<% end %>
				</div>
			<% end %>
		<% end %>
	</div>

	<% if current_user == @post.writer %>
		<div class="edit_links">
			<% if !@post.published %>
				<%= link_to "Edit Post", controller: "posts", action: "edit", id: @post %>
	      <%= button_to "Publish Post", { action: "publish", id: @post.id }, method: :post %>
	      <%= button_to "Delete Post", { action: "destroy", id: @post.id },
                                method: :delete, data: { confirm: "Are you sure?" } %>
	    <% elsif @post.published %>
	    	<%= button_to "Return to Draft", { action: "publish", id: @post.id }, method: :post %>
	    	<%= button_to "Delete Post", { action: "destroy", id: @post.id },
                                method: :delete, data: { confirm: "Are you sure?" } %>
	    <% end %>
		</div>
	<%end%>

</div>

